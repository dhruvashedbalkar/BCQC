{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruvashedbalkar/Desktop/QB.Club/lib/db.ts"],"sourcesContent":["import { MongoClient, Db } from 'mongodb'\n\nlet client: MongoClient | null = null\nlet db: Db | null = null\n\nexport async function getDb(): Promise<Db> {\n  const uri = process.env.MONGODB_URI\n  if (!uri) {\n    throw new Error('MONGODB_URI env var is not set')\n  }\n\n  if (db) return db\n\n  if (!client) {\n    client = new MongoClient(uri)\n    await client.connect()\n  }\n\n  db = client.db(process.env.MONGODB_DB || 'BCQC')\n\n  const users = db.collection('users')\n  await users.createIndex({ email: 1 }, { unique: true })\n  await users.createIndex({ username: 1 }, { unique: true })\n\n  return db\n}\n\nexport async function closeDb() {\n  if (client) {\n    await client.close()\n    client = null\n    db = null\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,IAAI,SAA6B;AACjC,IAAI,KAAgB;AAEb,eAAe;IACpB,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;IACnC,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,IAAI,OAAO;IAEf,IAAI,CAAC,QAAQ;QACX,SAAS,IAAI,sHAAW,CAAC;QACzB,MAAM,OAAO,OAAO;IACtB;IAEA,KAAK,OAAO,EAAE,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;IAEzC,MAAM,QAAQ,GAAG,UAAU,CAAC;IAC5B,MAAM,MAAM,WAAW,CAAC;QAAE,OAAO;IAAE,GAAG;QAAE,QAAQ;IAAK;IACrD,MAAM,MAAM,WAAW,CAAC;QAAE,UAAU;IAAE,GAAG;QAAE,QAAQ;IAAK;IAExD,OAAO;AACT;AAEO,eAAe;IACpB,IAAI,QAAQ;QACV,MAAM,OAAO,KAAK;QAClB,SAAS;QACT,KAAK;IACP;AACF"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruvashedbalkar/Desktop/QB.Club/app/api/auth/me/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { getDb } from '@/lib/db'\n\nexport const runtime = 'nodejs'\n\nexport async function GET(req: Request) {\n  const cookieHeader = req.headers.get('cookie') || ''\n  const match = cookieHeader.match(/(?:^|;\\s*)session_id=([^;]+)/)\n  const sessionId = match?.[1]\n  if (!sessionId) {\n    return NextResponse.json({ error: 'Not authenticated' }, { status: 401 })\n  }\n\n  const db = await getDb()\n  const sessions = db.collection('sessions')\n  const session = await sessions.findOne<{ email: string; expiresAt: Date }>({ sessionId })\n  if (!session) {\n    return NextResponse.json({ error: 'Invalid session' }, { status: 401 })\n  }\n\n  const users = db.collection('users')\n  const user = await users.findOne<{ email: string; username: string; walletAddress: string | null }>({ email: session.email })\n  if (!user) {\n    return NextResponse.json({ error: 'User not found' }, { status: 404 })\n  }\n\n  return NextResponse.json({ email: user.email, username: user.username, walletAddress: user.walletAddress })\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,UAAU;AAEhB,eAAe,IAAI,GAAY;IACpC,MAAM,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa;IAClD,MAAM,QAAQ,aAAa,KAAK,CAAC;IACjC,MAAM,YAAY,OAAO,CAAC,EAAE;IAC5B,IAAI,CAAC,WAAW;QACd,OAAO,8XAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACzE;IAEA,MAAM,KAAK,MAAM,IAAA,6IAAK;IACtB,MAAM,WAAW,GAAG,UAAU,CAAC;IAC/B,MAAM,UAAU,MAAM,SAAS,OAAO,CAAqC;QAAE;IAAU;IACvF,IAAI,CAAC,SAAS;QACZ,OAAO,8XAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,MAAM,QAAQ,GAAG,UAAU,CAAC;IAC5B,MAAM,OAAO,MAAM,MAAM,OAAO,CAAoE;QAAE,OAAO,QAAQ,KAAK;IAAC;IAC3H,IAAI,CAAC,MAAM;QACT,OAAO,8XAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,OAAO,8XAAY,CAAC,IAAI,CAAC;QAAE,OAAO,KAAK,KAAK;QAAE,UAAU,KAAK,QAAQ;QAAE,eAAe,KAAK,aAAa;IAAC;AAC3G"}}]
}